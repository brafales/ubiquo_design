require File.dirname(__FILE__) + '/../../test_helper'
<% model_name = name.classify -%>

class <%= model_name %>GeneratorTest < ActionController::TestCase
  tests PagesController

  def test_<%= name %>_generator_should_run_generator
    component, page = insert_component(component_attributes)
    locals, render_options = run_generator(:<%= name %>, component, {})
    #assert_equal locals[:title], component_attributes[:title], "Error on component title"
  end

  def test_<%= name %>_generator_should_get_show
    component, page = insert_component
    get :show, :url_name => page.url_name
    assert_response :success
    # Test the view here
    # assert_select "div.xxx" do
    # end
  end

  private

  def component_attributes
    {
      # attributes for component here    
    }  
  end
  
  def insert_component(component_options = {}, component_type_options = {})      
    component_options.update(component_attributes)
    component_type_options.update({
      :key => "<%= name %>", 
      :subclass_type => "<%= model_name %>"
    })
    insert_component_in_page(component_type_options, component_options)
  end

end
