require File.dirname(__FILE__) + '/../../test_helper'
<% model_name = name.classify -%>

class <%= model_name %>GeneratorTest < ActionController::TestCase
  tests PagesController

  def test_<%= name %>_widget_should_be_run
    widget, page = insert_widget(widget_attributes)
    locals, render_options = run_widget(:<%= name %>, widget, {})
    #assert_equal locals[:title], widget_attributes[:title], "Error on widget title"
  end

  def test_<%= name %>_widget_should_get_show
    widget, page = insert_widget
    get :show, :url_name => page.url_name
    assert_response :success
    # Test the view here
    # assert_select "div.xxx" do
    # end
  end

  private

  def widget_attributes
    {
      # attributes for widget here
    }  
  end
  
  def insert_widget(widget_options = {}, widget_type_options = {})
    widget_options.update(widget_attributes)
    widget_type_options.update({
      :key => "<%= name %>", 
      :subclass_type => "<%= model_name %>"
    })
    insert_widget_in_page(widget_type_options, widget_options)
  end

end
